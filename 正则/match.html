<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //ES2020 增加了String.prototype.matchAll() 方法， 可以一次性取出所有匹配。 不过， 它返回的是一个遍历器（ Iterator）， 而不是数组。

        const string = 'test1test2test3';

        // g 修饰符加不加都可以
        const regex = /t(e)(st(\d?))/g;

        for (const match of string.matchAll(regex)) {
            console.log(match);
        }
        // ["test1", "e", "st1", "1", index: 0, input: "test1test2test3"]
        // ["test2", "e", "st2", "2", index: 5, input: "test1test2test3"]
        // ["test3", "e", "st3", "3", index: 10, input: "test1test2test3"]
        //上面代码中， 由于string.matchAll(regex) 返回的是遍历器， 所以可以用for...of循环取出。 相对于返回数组， 返回遍历器的好处在于， 如果匹配结果是一个很大的数组， 那么遍历器比较节省资源。

        //遍历器转为数组是非常简单的， 使用...运算符和Array.from() 方法就可以了。

        // 转为数组方法一
        [...string.matchAll(regex)]

        // 转为数组方法二
        Array.from(string.matchAll(regex))
    </script>
</body>

</html>